<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AURA — Acquisti</title>

  <!-- Design system -->
  <link rel="stylesheet" href="../theme.css">
  <!-- Page styles -->
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header class="header header-nav">
      <div class="brand">
        <div class="logo">AURA</div>
      </div>

      <nav class="nav" aria-label="Navigazione">
        <a class="nav-link" href="../index.html">Home</a>
        <a class="nav-link" href="../magazzino/index.html">Magazzino</a>
        <a class="nav-link is-active" href="./index.html">Acquisti</a>
      </nav>

      <!-- KPI compatti (dot + numero) -->
      <div class="kpis kpis-compact" aria-label="Sintesi acquisti">
        <div class="kpi kpi-compact" title="Suggerimenti">
          <span class="dot is-dry"></span>
          <span class="v" id="kSug">—</span>
        </div>
        <div class="kpi kpi-compact" title="Critici">
          <span class="dot is-err"></span>
          <span class="v" id="kLow">—</span>
        </div>
      </div>
    </header>
    
  <div class="wrap">
    <main class="purchases purchases-b">
  <!-- LEFT -->
  <section class="left">
    <div class="card panel hero">
      <div class="panel-top">
        <h2>Consigli d’acquisto</h2>

        <div class="seg" role="tablist" aria-label="Filtri">
          <button class="seg-btn is-active" data-filter="all" role="tab">Tutti</button>
          <button class="seg-btn" data-filter="critical" role="tab">Critici</button>
          <button class="seg-btn" data-filter="soon" role="tab">A rischio</button>
        </div>
      </div>

      <div class="note">
        Suggerimenti basati su stock, consumo, job pianificati e rischio igroscopico (simulazione tesi).
      </div>

      <!-- HERO: top 2 -->
      <div id="heroSuggestions" class="hero-grid"></div>
    </div>

    <div class="card panel listwrap">
      <div class="panel-top">
        <h2>Altri suggerimenti</h2>
        <div class="muted mini">ordinati per score</div>
      </div>

      <!-- LIST: rest -->
      <div id="suggestions" class="rows"></div>

      <!-- Drawer -->
      <div id="drawer" class="drawer is-hidden" aria-live="polite">
        <div class="drawer-top">
          <div>
            <div class="drawer-title" id="dTitle">Dettaglio</div>
            <div class="drawer-sub" id="dSub">—</div>
          </div>

          <div class="drawer-actions">
            <button class="btn ghost" id="btnExportRec">Export JSON</button>
            <button class="btn" id="btnCloseDrawer">Chiudi</button>
          </div>
        </div>

        <div class="reasons" id="dReasons"></div>

        <div class="formula">
          <div class="formula-k">Score</div>
          <div class="formula-v">stock + consumo + job + igro + ETA (0–100)</div>
        </div>

        <pre class="json" id="dJson"></pre>
      </div>
    </div>
  </section>

  <!-- RIGHT rail -->
  <aside class="right stack">
    <section class="card panel">
      <div class="panel-top">
        <h2>Scorte materiali</h2>
        <button class="btn ghost" id="btnSim">Simula consumo</button>
      </div>

      <div class="table-head">
        <div>Materiale</div>
        <div class="right">Stock</div>
        <div class="right">Soglia</div>
        <div class="right">Stato</div>
      </div>

      <div id="stockList" class="table"></div>
    </section>

    <section class="card panel">
      <div class="panel-top">
        <h2>Lista acquisti</h2>
        <div class="panel-actions">
          <button class="btn ghost" id="btnPrint">Stampa</button>
          <button class="btn" id="btnExportList">Export</button>
        </div>
      </div>

      <div id="basket" class="basket"></div>
      <div class="basket-actions">
        <button class="btn ghost" id="btnClear">Svuota</button>
      </div>
    </section>

    <section class="card panel">
      <div class="panel-top">
        <h2>Link fornitori</h2>
        <button class="btn" id="btnAdd">Aggiungi</button>
      </div>

      <form id="linkForm" class="form is-hidden">
        <div class="field">
          <label>Materiale</label>
          <input id="fMat" placeholder="es. PLA" required />
        </div>
        <div class="field">
          <label>Nome link</label>
          <input id="fName" placeholder="es. Amazon — PLA Nero" required />
        </div>
        <div class="field">
          <label>URL</label>
          <input id="fUrl" placeholder="https://..." required />
        </div>

        <div class="form-actions">
          <button type="button" class="btn ghost" id="btnCancel">Annulla</button>
          <button class="btn" type="submit">Salva</button>
        </div>
      </form>

      <div id="links" class="links"></div>
    </section>
  </aside>
</main>
  </div>

  <script src="./app.js"></script>
</body>
</html>
